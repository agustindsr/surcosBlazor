#pragma checksum "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b11a90103c6319b6aa4049d3a1d8a0aecf396dd4"
// <auto-generated/>
#pragma warning disable 1591
namespace SurcosBlazor.Client.Pages.BackOffice.Tesoreria.RecibosCobranza
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client;

#line default
#line hidden
#line 7 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Shared;

#line default
#line hidden
#line 9 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Helpers;

#line default
#line hidden
#line 11 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared.Entidades;

#line default
#line hidden
#line 12 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared;

#line default
#line hidden
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Repositorio;

#line default
#line hidden
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#line 8 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
           [Authorize(Roles = "Admin, Tesoreria")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(BackOfficeLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/BackOffice/Tesoreria/ReciboCobranza")]
    public partial class ReciboCobranzaForm : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
 if (cargando)
{

#line default
#line hidden
            __builder.AddContent(0, "    ");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.Loading>(1);
            __builder.CloseComponent();
            __builder.AddMarkupContent(2, "\r\n");
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
}

#line default
#line hidden
            __builder.OpenElement(3, "nav");
            __builder.AddAttribute(4, "aria-label", "breadcrumb");
            __builder.AddMarkupContent(5, "\r\n    ");
            __builder.OpenElement(6, "ol");
            __builder.AddAttribute(7, "class", "breadcrumb");
            __builder.AddMarkupContent(8, "\r\n        ");
            __builder.OpenElement(9, "li");
            __builder.AddAttribute(10, "class", "breadcrumb-item");
            __builder.AddAttribute(11, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                () => uri.NavigateTo("BackOffice/Tesoreria")

#line default
#line hidden
            ));
            __builder.AddContent(12, "Tesoreria");
            __builder.CloseElement();
            __builder.AddMarkupContent(13, "\r\n        ");
            __builder.OpenElement(14, "li");
            __builder.AddAttribute(15, "class", "breadcrumb-item");
            __builder.AddAttribute(16, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 17 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                () => uri.NavigateTo("BackOffice/Tesoreria/ListadoRecibosCobranza")

#line default
#line hidden
            ));
            __builder.AddContent(17, "Recibos de Cobranza");
            __builder.CloseElement();
            __builder.AddMarkupContent(18, "\r\n        ");
            __builder.OpenElement(19, "li");
            __builder.AddAttribute(20, "class", "breadcrumb-item active");
            __builder.AddAttribute(21, "aria-current", "page");
            __builder.AddAttribute(22, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 18 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                           () => uri.NavigateTo($"BackOffice/Tesoreria/ReciboCobranza")

#line default
#line hidden
            ));
            __builder.AddContent(23, "Nuevo Recibo de Cobranza");
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(25, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n");
            __builder.AddMarkupContent(27, "<h3>Nuevo Recibo Cobranza</h3>\r\n");
#line 22 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
 if (recibo != null)
{


#line default
#line hidden
            __builder.AddContent(28, "    ");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(29);
            __builder.AddAttribute(30, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#line 25 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                     recibo

#line default
#line hidden
            ));
            __builder.AddAttribute(31, "OnValidSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#line 25 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                              async()=> { cargando = true; await CrearRecibo(); }

#line default
#line hidden
            )));
            __builder.AddAttribute(32, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(33, "\r\n        ");
                __builder2.OpenComponent<Blazored.FluentValidation.FluentValidationValidator>(34);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(35, "\r\n        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.ValidationSummary>(36);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(37, "\r\n        ");
                __builder2.OpenElement(38, "div");
                __builder2.AddAttribute(39, "class", "p-4");
                __builder2.AddAttribute(40, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(41, "\r\n\r\n            ");
                __builder2.OpenElement(42, "div");
                __builder2.AddAttribute(43, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(44, "\r\n                ");
                __builder2.OpenElement(45, "div");
                __builder2.AddAttribute(46, "class", "form-group col-md-6");
                __builder2.AddMarkupContent(47, "\r\n                    ");
                __builder2.AddMarkupContent(48, "<label>Cliente</label>\r\n");
#line 33 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                     if (recibo.ClienteId == 0)
                    {



#line default
#line hidden
                __builder2.AddContent(49, "                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.RecibosCobranza.ReciboCobranzaForm.TypeInference.CreateInputBuscaTypeahead_0(__builder2, 50, 51, 
#line 37 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                   ((Cliente cliente) => { clienteSeleccionado(cliente); return cliente; })

#line default
#line hidden
                , 52, 
#line 38 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                           (async (string name) => await buscarClientes(name))

#line default
#line hidden
                , 53, (cliente) => (__builder3) => {
                    __builder3.AddMarkupContent(54, "\r\n                                ");
                    __builder3.OpenElement(55, "div");
                    __builder3.AddContent(56, "#");
                    __builder3.AddContent(57, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                       cliente.Id

#line default
#line hidden
                    );
                    __builder3.AddContent(58, " ");
                    __builder3.AddContent(59, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                   cliente.nombre

#line default
#line hidden
                    );
                    __builder3.AddContent(60, ", ");
                    __builder3.AddContent(61, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                    cliente.apellido

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(62, "\r\n                            ");
                }
                );
                __builder2.AddMarkupContent(63, "\r\n");
#line 43 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                    }
                    else
                    {

#line default
#line hidden
                __builder2.AddContent(64, "                        ");
                __builder2.OpenElement(65, "div");
                __builder2.OpenElement(66, "h2");
                __builder2.OpenElement(67, "strong");
                __builder2.AddAttribute(68, "class", "badge");
                __builder2.AddContent(69, "#");
                __builder2.AddContent(70, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                         recibo.ClienteId

#line default
#line hidden
                );
                __builder2.AddContent(71, " ");
                __builder2.AddContent(72, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                           recibo.Cliente.nombre

#line default
#line hidden
                );
                __builder2.AddContent(73, ", ");
                __builder2.AddContent(74, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                   recibo.Cliente.apellido

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.OpenElement(75, "i");
                __builder2.AddAttribute(76, "class", "fas fa-times text-danger");
                __builder2.AddAttribute(77, "style", "cursor:pointer");
                __builder2.AddAttribute(78, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                                                                                                        (() => { recibo.Cliente = null; recibo.ClienteId = 0; recibo.Imputaciones = new List<ImputacionComprobantesVenta>(); facturasPendientes = new List<Factura>(); this.StateHasChanged(); })

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(79, "\r\n");
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                    }

#line default
#line hidden
                __builder2.AddContent(80, "                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(81, "\r\n                ");
                __builder2.OpenElement(82, "div");
                __builder2.AddAttribute(83, "class", "col-md-6");
                __builder2.AddMarkupContent(84, "\r\n                    ");
                __builder2.AddMarkupContent(85, "<label>Fecha</label>\r\n                    ");
                __builder2.OpenElement(86, "input");
                __builder2.AddAttribute(87, "class", "form-control");
                __builder2.AddAttribute(88, "type", "date");
                __builder2.AddAttribute(89, "value", 
#line 51 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                    recibo.fecha.ToString("yyyy-MM-dd")

#line default
#line hidden
                );
                __builder2.AddAttribute(90, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 51 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                      (ChangeEventArgs e) => { recibo.fecha = Convert.ToDateTime(e.Value); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(91, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(92, "\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(93, "\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(94, "\r\n        ");
                __builder2.OpenElement(95, "div");
                __builder2.AddAttribute(96, "class", "my-2");
                __builder2.AddMarkupContent(97, "\r\n            ");
                __builder2.AddMarkupContent(98, @"<ul class=""nav nav-pills mb-3"" id=""pills-tab"" role=""tablist"">
                <li class=""nav-item"">
                    <a class=""nav-link active"" id=""pills-imputaciones-tab"" data-toggle=""pill"" href=""#pills-imputaciones"" role=""tab"" aria-controls=""pills-imputaciones"" aria-selected=""true"">Imputaciones</a>
                </li>
                <li class=""nav-item mx-3"">
                    <a class=""nav-link"" id=""pills-tesoreria-tab"" data-toggle=""pill"" href=""#pills-tesoreria"" role=""tab"" aria-controls=""pills-tesoreria"" aria-selected=""false"">Movimientos de Tesorería</a>
                </li>
            </ul>

            ");
                __builder2.OpenElement(99, "div");
                __builder2.AddAttribute(100, "class", "tab-content bg-light rounded");
                __builder2.AddAttribute(101, "id", "pills-tabContent");
                __builder2.AddMarkupContent(102, "\r\n                ");
                __builder2.OpenElement(103, "div");
                __builder2.AddAttribute(104, "class", "tab-pane fade show active");
                __builder2.AddAttribute(105, "id", "pills-imputaciones");
                __builder2.AddAttribute(106, "role", "tabpanel");
                __builder2.AddAttribute(107, "aria-labelledby", "pills-imputaciones-tab");
                __builder2.AddMarkupContent(108, "\r\n                    ");
                __builder2.OpenElement(109, "div");
                __builder2.AddAttribute(110, "class", true);
                __builder2.AddAttribute(111, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(112, "\r\n                        ");
                __builder2.OpenElement(113, "table");
                __builder2.AddAttribute(114, "class", "table table-sm table-striped");
                __builder2.AddMarkupContent(115, "\r\n                            ");
                __builder2.AddMarkupContent(116, @"<thead>
                                <tr>
                                    <th>Seleccionada</th>
                                    <th>Número de comprobante</th>
                                    <th>Estado</th>
                                    <th>Total Comprobante</th>
                                    <th>Total Pendiente</th>
                                    <th>Total a Imputar</th>
                                </tr>
                            </thead>
                            ");
                __builder2.OpenElement(117, "tbody");
                __builder2.AddMarkupContent(118, "\r\n");
#line 80 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                 foreach (Factura factura in facturasPendientes)
                                {

#line default
#line hidden
                __builder2.AddContent(119, "                                    ");
                __builder2.OpenElement(120, "tr");
                __builder2.AddMarkupContent(121, "\r\n                                        ");
                __builder2.OpenElement(122, "td");
                __builder2.AddMarkupContent(123, "\r\n");
#line 84 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                             if (recibo.Imputaciones.Where(x => x.FacturaVentasId == factura.Id).Count() > 0)
                                            {

#line default
#line hidden
                __builder2.AddContent(124, "                                                ");
                __builder2.OpenElement(125, "input");
                __builder2.AddAttribute(126, "type", "checkbox");
                __builder2.AddAttribute(127, "checked", true);
                __builder2.AddAttribute(128, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 86 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                           () => { recibo.Imputaciones.Remove(recibo.Imputaciones.Single(x => x.FacturaVentasId == factura.Id)); this.StateHasChanged(); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(129, "\r\n");
#line 87 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                            }
                                            else
                                            {

#line default
#line hidden
                __builder2.AddContent(130, "                                                ");
                __builder2.OpenElement(131, "input");
                __builder2.AddAttribute(132, "type", "checkbox");
                __builder2.AddAttribute(133, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 90 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                   () => { recibo.Imputaciones.Add(new ImputacionComprobantesVenta
                                                                               { FacturaVentasId = factura.Id, FacturaVenta = factura,totalImputado = (factura.totalComprobante - factura.totalCancelado),  });
                                                                                   this.StateHasChanged(); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(134, "\r\n");
#line 93 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                            }

#line default
#line hidden
                __builder2.AddContent(135, "                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(136, "\r\n                                        ");
                __builder2.OpenElement(137, "td");
                __builder2.AddContent(138, 
#line 95 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                             factura.codigo

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(139, "\r\n                                        ");
                __builder2.OpenElement(140, "td");
                __builder2.AddContent(141, 
#line 96 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                             factura.EstadoFactura.nombre

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(142, "\r\n                                        ");
                __builder2.OpenElement(143, "td");
                __builder2.AddContent(144, "$");
                __builder2.AddContent(145, 
#line 97 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                              factura.totalComprobante

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(146, "\r\n                                        ");
                __builder2.OpenElement(147, "td");
                __builder2.AddContent(148, "$");
                __builder2.AddContent(149, 
#line 98 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                               factura.totalComprobante - factura.totalCancelado

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(150, "\r\n                                        ");
                __builder2.OpenElement(151, "td");
                __builder2.AddMarkupContent(152, "\r\n");
#line 100 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                             if (recibo.Imputaciones.Where(x => x.FacturaVentasId == factura.Id).Count() > 0)
                                            {

#line default
#line hidden
                __builder2.AddContent(153, "                                                ");
                __builder2.OpenElement(154, "input");
                __builder2.AddAttribute(155, "type", "number");
                __builder2.AddAttribute(156, "step", "0.01");
                __builder2.AddAttribute(157, "max", 
#line 102 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                        factura.totalComprobante - factura.totalCancelado

#line default
#line hidden
                );
                __builder2.AddAttribute(158, "class", "form-control");
                __builder2.AddAttribute(159, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 102 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                                                                        recibo.Imputaciones.Single(x => x.FacturaVentasId == factura.Id).totalImputado

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(160, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => recibo.Imputaciones.Single(x => x.FacturaVentasId == factura.Id).totalImputado = __value, recibo.Imputaciones.Single(x => x.FacturaVentasId == factura.Id).totalImputado, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(161, "\r\n");
#line 103 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                            }

#line default
#line hidden
                __builder2.AddContent(162, "                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(163, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(164, "\r\n");
#line 106 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                }

#line default
#line hidden
                __builder2.AddContent(165, "                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(166, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(167, "\r\n\r\n\r\n\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(168, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(169, "\r\n                ");
                __builder2.OpenElement(170, "div");
                __builder2.AddAttribute(171, "class", "tab-pane fade");
                __builder2.AddAttribute(172, "id", "pills-tesoreria");
                __builder2.AddAttribute(173, "role", "tabpanel");
                __builder2.AddAttribute(174, "aria-labelledby", "pills-tesoreria-tab");
                __builder2.AddMarkupContent(175, "\r\n\r\n                    ");
                __builder2.OpenElement(176, "div");
                __builder2.AddAttribute(177, "class", "p-4");
                __builder2.AddAttribute(178, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(179, "\r\n                        ");
                __builder2.OpenElement(180, "div");
                __builder2.AddAttribute(181, "class", "d-flex justify-content-end");
                __builder2.OpenElement(182, "div");
                __builder2.AddAttribute(183, "class", "btn btn-info");
                __builder2.AddAttribute(184, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 117 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                      () => recibo.movimientosCaja.Add(new MovimientoCaja {  entra = true, })

#line default
#line hidden
                ));
                __builder2.AddContent(185, "Agregar");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(186, "\r\n                        ");
                __builder2.OpenElement(187, "table");
                __builder2.AddAttribute(188, "class", "table table-sm");
                __builder2.AddMarkupContent(189, "\r\n                            ");
                __builder2.AddMarkupContent(190, @"<thead>
                                <tr>
                                    <th>Caja</th>
                                    <th>Importe</th>
                                    <th></th>
                                </tr>
                            </thead>
");
#line 126 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                             foreach (MovimientoCaja movimientoCaja in recibo.movimientosCaja)
                            {

#line default
#line hidden
                __builder2.AddContent(191, "                                ");
                __builder2.OpenElement(192, "tr");
                __builder2.AddMarkupContent(193, "\r\n                                    ");
                __builder2.OpenElement(194, "td");
                __builder2.AddMarkupContent(195, "\r\n                                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.RecibosCobranza.ReciboCobranzaForm.TypeInference.CreateSelectGenerico_1(__builder2, 196, 197, 
#line 130 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                               cajas

#line default
#line hidden
                , 198, 
#line 130 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                  movimientoCaja.Caja

#line default
#line hidden
                , 199, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, 
#line 131 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                      (Caja caja) => { movimientoCaja.Caja = caja; movimientoCaja.CajaId = caja.Id; }

#line default
#line hidden
                ), 200, (caja) => (__builder3) => {
                    __builder3.AddContent(201, 
#line 133 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                        caja.nombre

#line default
#line hidden
                    );
                }
                );
                __builder2.AddMarkupContent(202, "\r\n                                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.RecibosCobranza.ReciboCobranzaForm.TypeInference.CreateValidationMessage_2(__builder2, 203, 204, 
#line 135 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                  () => recibo.Imputaciones

#line default
#line hidden
                );
                __builder2.AddMarkupContent(205, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(206, "\r\n                                    ");
                __builder2.OpenElement(207, "td");
                __builder2.AddMarkupContent(208, "\r\n                                        ");
                __builder2.OpenElement(209, "input");
                __builder2.AddAttribute(210, "type", "number");
                __builder2.AddAttribute(211, "step", "0.01");
                __builder2.AddAttribute(212, "max", "");
                __builder2.AddAttribute(213, "class", "form-control");
                __builder2.AddAttribute(214, "onblur", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.FocusEventArgs>(this, 
#line 138 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                                                       ()=>recibo.totalComprobante = recibo.movimientosCaja.Sum(x => x.totalMovimiento)

#line default
#line hidden
                ));
                __builder2.AddAttribute(215, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 138 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                            movimientoCaja.totalMovimiento

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(216, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => movimientoCaja.totalMovimiento = __value, movimientoCaja.totalMovimiento, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(217, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(218, "\r\n\r\n                                    ");
                __builder2.OpenElement(219, "td");
                __builder2.OpenElement(220, "i");
                __builder2.AddAttribute(221, "class", "far fa-trash-alt text-danger");
                __builder2.AddAttribute(222, "style", "cursor:pointer");
                __builder2.AddAttribute(223, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 141 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                   () => { recibo.movimientosCaja.Remove(movimientoCaja); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(224, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(225, "\r\n");
#line 144 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                            }

#line default
#line hidden
                __builder2.AddContent(226, "                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(227, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(228, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(229, "\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(230, "\r\n\r\n\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(231, "\r\n\r\n        ");
                __builder2.OpenElement(232, "div");
                __builder2.AddAttribute(233, "class", "p-4");
                __builder2.AddAttribute(234, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(235, "\r\n");
#line 154 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
             if (true)
            {
                decimal diferencia = recibo.movimientosCaja.Sum(x => x.totalMovimiento) - recibo.Imputaciones.Sum(x => x.totalImputado);

#line default
#line hidden
                __builder2.AddContent(236, "                ");
                __builder2.OpenElement(237, "div");
                __builder2.AddAttribute(238, "class", "col-md-12");
                __builder2.AddMarkupContent(239, "<strong>Total imputado:</strong>$ ");
                __builder2.AddContent(240, 
#line 157 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                          recibo.Imputaciones.Sum(x => x.totalImputado)

#line default
#line hidden
                );
                __builder2.AddContent(241, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(242, "\r\n                ");
                __builder2.OpenElement(243, "div");
                __builder2.AddAttribute(244, "class", "col-md-12");
                __builder2.AddMarkupContent(245, "<strong>Total pagado:</strong>$ ");
                __builder2.AddContent(246, 
#line 158 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                        recibo.movimientosCaja.Sum(x => x.totalMovimiento)

#line default
#line hidden
                );
                __builder2.AddContent(247, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(248, "\r\n                ");
                __builder2.OpenElement(249, "div");
                __builder2.AddAttribute(250, "class", "col-md-12" + " " + (
#line 159 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                        diferencia > 0 ? "text-success" : ""

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(251, "<strong>A cuenta: </strong>$  ");
                __builder2.AddContent(252, 
#line 159 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                               diferencia > 0 ? diferencia : 0.00M

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(253, "\r\n                ");
                __builder2.OpenElement(254, "div");
                __builder2.AddAttribute(255, "class", "col-md-12" + " " + (
#line 160 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                        diferencia < 0 ? "text-danger" : ""

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(256, "<strong>Diferencia: </strong>$  ");
                __builder2.AddContent(257, 
#line 160 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
                                                                                                                diferencia < 0 ? diferencia : 0.00M

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(258, "\r\n");
#line 161 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
            }

#line default
#line hidden
                __builder2.AddContent(259, "        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(260, "\r\n        ");
                __builder2.AddMarkupContent(261, "<button type=\"submit\" class=\"btn btn-block btn-info my-3\">Crear</button>\r\n    ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(262, "\r\n");
#line 165 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
}

#line default
#line hidden
        }
        #pragma warning restore 1998
#line 168 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\RecibosCobranza\ReciboCobranzaForm.razor"
       
    public ReciboCobranzas recibo { get; set; }
    public List<Factura> facturasPendientes { get; set; } = new List<Factura>();
    public System.Security.Claims.ClaimsPrincipal User { get; set; }
    public string userName { get; set; }
    public List<Caja> cajas { get; set; }
    public bool cargando { get; set; }
    protected override async Task OnInitializedAsync()
    {

        recibo = new ReciboCobranzas { movimientosCaja = new List<MovimientoCaja>(), Imputaciones = new List<ImputacionComprobantesVenta>() };

        var authState = await authStateProvider.GetAuthenticationStateAsync();
        User = authState.User;
        userName = User.Identity.Name;
        await ListarCajas();
    }


    public async Task ListarCajas()
    {
        cajas = await http.GetJsonAsync<List<Caja>>($"api/caja/cajasHabilitadas?userName={userName}");

    }

    public async Task<List<Cliente>> buscarClientes(string name)
    {
        return await http.GetJsonAsync<List<Cliente>>($"api/cliente?cantidadDeRegistros=25&filtro={name}");
    }

    public async Task clienteSeleccionado(Cliente cliente)
    {
        recibo.Cliente = cliente;
        recibo.ClienteId = cliente.Id;
        await BuscarComprobantesPendientes();
        this.StateHasChanged();
    }
    public async Task BuscarComprobantesPendientes()
    {

        facturasPendientes = await http.GetJsonAsync<List<Factura>>($"api/factura/facturasPorClienteParaRecibo?clienteId={recibo.ClienteId}");
    }


    public async Task CrearRecibo()
    {
        recibo.Cliente.Domicilio = null;
        if (recibo.Imputaciones.Count > 0)
        {
            recibo.EstadoReciboId = 1;
        }
        else
        {
            recibo.EstadoReciboId = 2;

        }
        recibo.totalImputado = recibo.Imputaciones.Sum(x => x.totalImputado);
        var respuesta = await repositorio.Post("api/ReciboCobranza", recibo);
        cargando = false;

        if (!respuesta.Error)
        {
            uri.NavigateTo($"/BackOffice/Tesoreria/ListadoRecibosCobranza");
            toastService.ShowSuccess("Se creó correctamente el recibo");
        }
        else
        {
            toastService.ShowError(respuesta.HttpResponseMessage.Content.ReadAsStringAsync().Result);
        }
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager uri { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IToastService toastService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IRepositorio repositorio { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider authStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
namespace __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.RecibosCobranza.ReciboCobranzaForm
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateInputBuscaTypeahead_0<T>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Func<T, T> __arg0, int __seq1, global::System.Func<global::System.String, global::System.Threading.Tasks.Task<global::System.Collections.Generic.IEnumerable<T>>> __arg1, int __seq2, global::Microsoft.AspNetCore.Components.RenderFragment<T> __arg2)
        {
        __builder.OpenComponent<global::SurcosBlazor.Client.Shared.InputBuscaTypeahead<T>>(seq);
        __builder.AddAttribute(__seq0, "ElementoSeleccionado", __arg0);
        __builder.AddAttribute(__seq1, "SearchMethod", __arg1);
        __builder.AddAttribute(__seq2, "MyResultTemplate", __arg2);
        __builder.CloseComponent();
        }
        public static void CreateSelectGenerico_1<T>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Collections.Generic.List<T> __arg0, int __seq1, T __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<T> __arg2, int __seq3, global::Microsoft.AspNetCore.Components.RenderFragment<T> __arg3)
        {
        __builder.OpenComponent<global::SurcosBlazor.Client.Shared.SelectGenerico<T>>(seq);
        __builder.AddAttribute(__seq0, "TList", __arg0);
        __builder.AddAttribute(__seq1, "TItemActual", __arg1);
        __builder.AddAttribute(__seq2, "SelectItem", __arg2);
        __builder.AddAttribute(__seq3, "TTemplate", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_2<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
