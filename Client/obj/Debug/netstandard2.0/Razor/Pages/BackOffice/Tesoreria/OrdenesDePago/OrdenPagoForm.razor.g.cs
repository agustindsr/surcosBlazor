#pragma checksum "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "75c7c56999ab06ed22bced9b95bdc56eccac1592"
// <auto-generated/>
#pragma warning disable 1591
namespace SurcosBlazor.Client.Pages.BackOffice.Tesoreria.OrdenesDePago
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client;

#line default
#line hidden
#line 7 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Shared;

#line default
#line hidden
#line 9 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Helpers;

#line default
#line hidden
#line 11 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared.Entidades;

#line default
#line hidden
#line 12 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared;

#line default
#line hidden
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Repositorio;

#line default
#line hidden
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#line 8 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
           [Authorize(Roles = "Admin, Tesoreria")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(BackOfficeLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/BackOffice/Tesoreria/OrdenPago")]
    public partial class OrdenPagoForm : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
 if (cargando)
{

#line default
#line hidden
            __builder.AddContent(0, "    ");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.Loading>(1);
            __builder.CloseComponent();
            __builder.AddMarkupContent(2, "\r\n");
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
}

#line default
#line hidden
            __builder.OpenElement(3, "nav");
            __builder.AddAttribute(4, "aria-label", "breadcrumb");
            __builder.AddMarkupContent(5, "\r\n    ");
            __builder.OpenElement(6, "ol");
            __builder.AddAttribute(7, "class", "breadcrumb");
            __builder.AddMarkupContent(8, "\r\n        ");
            __builder.OpenElement(9, "li");
            __builder.AddAttribute(10, "class", "breadcrumb-item");
            __builder.AddAttribute(11, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                () => uri.NavigateTo("BackOffice/Tesoreria")

#line default
#line hidden
            ));
            __builder.AddContent(12, "Tesoreria");
            __builder.CloseElement();
            __builder.AddMarkupContent(13, "\r\n        ");
            __builder.OpenElement(14, "li");
            __builder.AddAttribute(15, "class", "breadcrumb-item");
            __builder.AddAttribute(16, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 17 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                () => uri.NavigateTo("BackOffice/Tesoreria/ListadoOrdenesPago")

#line default
#line hidden
            ));
            __builder.AddContent(17, "Ordenes de pago");
            __builder.CloseElement();
            __builder.AddMarkupContent(18, "\r\n        ");
            __builder.OpenElement(19, "li");
            __builder.AddAttribute(20, "class", "breadcrumb-item active");
            __builder.AddAttribute(21, "aria-current", "page");
            __builder.AddAttribute(22, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 18 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                           () => uri.NavigateTo($"BackOffice/Tesoreria/OrdenPago")

#line default
#line hidden
            ));
            __builder.AddContent(23, "Nueva Orden de Pago");
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(25, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n");
            __builder.AddMarkupContent(27, "<h3>Nueva Orden Pago</h3>\r\n");
#line 22 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
 if (ordenPago != null)
{


#line default
#line hidden
            __builder.AddContent(28, "    ");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(29);
            __builder.AddAttribute(30, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#line 25 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                     ordenPago

#line default
#line hidden
            ));
            __builder.AddAttribute(31, "OnValidSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#line 25 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                 async()=> { cargando = true; await CrearOrdenPago(); }

#line default
#line hidden
            )));
            __builder.AddAttribute(32, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(33, "\r\n        ");
                __builder2.OpenComponent<Blazored.FluentValidation.FluentValidationValidator>(34);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(35, "\r\n        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.ValidationSummary>(36);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(37, "\r\n        ");
                __builder2.OpenElement(38, "div");
                __builder2.AddAttribute(39, "class", "p-4");
                __builder2.AddAttribute(40, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(41, "\r\n\r\n            ");
                __builder2.OpenElement(42, "div");
                __builder2.AddAttribute(43, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(44, "\r\n                ");
                __builder2.OpenElement(45, "div");
                __builder2.AddAttribute(46, "class", "form-group col-md-6");
                __builder2.AddMarkupContent(47, "\r\n                    ");
                __builder2.AddMarkupContent(48, "<label>Proveedor</label>\r\n");
#line 33 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                     if (ordenPago.ProveedorId == 0)
                    {



#line default
#line hidden
                __builder2.AddContent(49, "                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.OrdenesDePago.OrdenPagoForm.TypeInference.CreateInputBuscaTypeahead_0(__builder2, 50, 51, 
#line 37 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                   ((Proveedor proveedor) => { proveedorSeleccionado(proveedor); return proveedor; })

#line default
#line hidden
                , 52, 
#line 38 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                           (async (string name) => await buscarProveedores(name))

#line default
#line hidden
                , 53, (proveedor) => (__builder3) => {
                    __builder3.AddMarkupContent(54, "\r\n                                ");
                    __builder3.OpenElement(55, "div");
                    __builder3.AddContent(56, "#");
                    __builder3.AddContent(57, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                       proveedor.Id

#line default
#line hidden
                    );
                    __builder3.AddContent(58, " ");
                    __builder3.AddContent(59, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                     proveedor.razonSocial

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(60, "\r\n                            ");
                }
                );
                __builder2.AddMarkupContent(61, "\r\n");
#line 43 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                    }
                    else
                    {

#line default
#line hidden
                __builder2.AddContent(62, "                        ");
                __builder2.OpenElement(63, "div");
                __builder2.OpenElement(64, "h2");
                __builder2.OpenElement(65, "strong");
                __builder2.AddAttribute(66, "class", "badge");
                __builder2.AddContent(67, "#");
                __builder2.AddContent(68, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                         ordenPago.ProveedorId

#line default
#line hidden
                );
                __builder2.AddContent(69, " ");
                __builder2.AddContent(70, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                ordenPago.Proveedor.razonSocial

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.OpenElement(71, "i");
                __builder2.AddAttribute(72, "class", "fas fa-times text-danger");
                __builder2.AddAttribute(73, "style", "cursor:pointer");
                __builder2.AddAttribute(74, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 46 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                                                                                             (() => { ordenPago.Proveedor = null; ordenPago.ProveedorId = 0; ordenPago.Imputaciones = new List<ImputacionComprobantesCompra>(); facturasPendientes = new List<FacturaCompras>(); this.StateHasChanged(); })

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(75, "\r\n");
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                    }

#line default
#line hidden
                __builder2.AddContent(76, "                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(77, "\r\n                ");
                __builder2.OpenElement(78, "div");
                __builder2.AddAttribute(79, "class", "col-md-6");
                __builder2.AddMarkupContent(80, "\r\n                    ");
                __builder2.AddMarkupContent(81, "<label>Fecha</label>\r\n                    ");
                __builder2.OpenElement(82, "input");
                __builder2.AddAttribute(83, "class", "form-control");
                __builder2.AddAttribute(84, "type", "date");
                __builder2.AddAttribute(85, "value", 
#line 51 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                    ordenPago.fecha.ToString("yyyy-MM-dd")

#line default
#line hidden
                );
                __builder2.AddAttribute(86, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 51 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                         (ChangeEventArgs e) => { ordenPago.fecha = Convert.ToDateTime(e.Value); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(87, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(88, "\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(89, "\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(90, "\r\n        ");
                __builder2.OpenElement(91, "div");
                __builder2.AddAttribute(92, "class", "my-2");
                __builder2.AddMarkupContent(93, "\r\n            ");
                __builder2.AddMarkupContent(94, @"<ul class=""nav nav-pills mb-3"" id=""pills-tab"" role=""tablist"">
                <li class=""nav-item"">
                    <a class=""nav-link active"" id=""pills-imputaciones-tab"" data-toggle=""pill"" href=""#pills-imputaciones"" role=""tab"" aria-controls=""pills-imputaciones"" aria-selected=""true"">Imputaciones</a>
                </li>
                <li class=""nav-item mx-3"">
                    <a class=""nav-link"" id=""pills-tesoreria-tab"" data-toggle=""pill"" href=""#pills-tesoreria"" role=""tab"" aria-controls=""pills-tesoreria"" aria-selected=""false"">Movimientos de Tesorería</a>
                </li>
            </ul>

            ");
                __builder2.OpenElement(95, "div");
                __builder2.AddAttribute(96, "class", "tab-content bg-light rounded");
                __builder2.AddAttribute(97, "id", "pills-tabContent");
                __builder2.AddMarkupContent(98, "\r\n                ");
                __builder2.OpenElement(99, "div");
                __builder2.AddAttribute(100, "class", "tab-pane fade show active");
                __builder2.AddAttribute(101, "id", "pills-imputaciones");
                __builder2.AddAttribute(102, "role", "tabpanel");
                __builder2.AddAttribute(103, "aria-labelledby", "pills-imputaciones-tab");
                __builder2.AddMarkupContent(104, "\r\n                    ");
                __builder2.OpenElement(105, "div");
                __builder2.AddAttribute(106, "class", true);
                __builder2.AddAttribute(107, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(108, "\r\n                        ");
                __builder2.OpenElement(109, "table");
                __builder2.AddAttribute(110, "class", "table table-sm table-striped");
                __builder2.AddMarkupContent(111, "\r\n                            ");
                __builder2.AddMarkupContent(112, @"<thead>
                                <tr>
                                    <th>Seleccionada</th>
                                    <th>Número de comprobante</th>
                                    <th>Estado</th>
                                    <th>Total Comprobante</th>
                                    <th>Total Pendiente</th>
                                    <th>Total a Imputar</th>
                                </tr>
                            </thead>
                            ");
                __builder2.OpenElement(113, "tbody");
                __builder2.AddMarkupContent(114, "\r\n");
#line 80 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                 foreach (FacturaCompras factura in facturasPendientes)
                                {

#line default
#line hidden
                __builder2.AddContent(115, "                                    ");
                __builder2.OpenElement(116, "tr");
                __builder2.AddMarkupContent(117, "\r\n                                        ");
                __builder2.OpenElement(118, "td");
                __builder2.AddMarkupContent(119, "\r\n");
#line 84 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                             if (ordenPago.Imputaciones.Where(x => x.FacturaComprasId == factura.Id).Count() > 0)
                                            {

#line default
#line hidden
                __builder2.AddContent(120, "                                                ");
                __builder2.OpenElement(121, "input");
                __builder2.AddAttribute(122, "type", "checkbox");
                __builder2.AddAttribute(123, "checked", true);
                __builder2.AddAttribute(124, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 86 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                           () => { ordenPago.Imputaciones.Remove(ordenPago.Imputaciones.Single(x => x.FacturaComprasId == factura.Id)); this.StateHasChanged(); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(125, "\r\n");
#line 87 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                            }
                                            else
                                            {

#line default
#line hidden
                __builder2.AddContent(126, "                                                ");
                __builder2.OpenElement(127, "input");
                __builder2.AddAttribute(128, "type", "checkbox");
                __builder2.AddAttribute(129, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 90 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                   () => { ordenPago.Imputaciones.Add(new ImputacionComprobantesCompra
                                                                               { FacturaComprasId = factura.Id, FacturaCompras = factura,totalImputado = (factura.totalComprobante - factura.totalCancelado),  });
                                                                                   this.StateHasChanged(); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(130, "\r\n");
#line 93 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                            }

#line default
#line hidden
                __builder2.AddContent(131, "                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(132, "\r\n                                        ");
                __builder2.OpenElement(133, "td");
                __builder2.AddContent(134, 
#line 95 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                             factura.codigo

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(135, "\r\n                                        ");
                __builder2.OpenElement(136, "td");
                __builder2.AddContent(137, 
#line 96 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                             factura.EstadoFactura.nombre

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(138, "\r\n                                        ");
                __builder2.OpenElement(139, "td");
                __builder2.AddContent(140, "$");
                __builder2.AddContent(141, 
#line 97 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                              factura.totalComprobante

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(142, "\r\n                                        ");
                __builder2.OpenElement(143, "td");
                __builder2.AddContent(144, "$");
                __builder2.AddContent(145, 
#line 98 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                               factura.totalComprobante - factura.totalCancelado

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(146, "\r\n                                        ");
                __builder2.OpenElement(147, "td");
                __builder2.AddMarkupContent(148, "\r\n");
#line 100 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                             if (ordenPago.Imputaciones.Where(x => x.FacturaComprasId == factura.Id).Count() > 0)
                                            {

#line default
#line hidden
                __builder2.AddContent(149, "                                                ");
                __builder2.OpenElement(150, "input");
                __builder2.AddAttribute(151, "type", "number");
                __builder2.AddAttribute(152, "step", "0.01");
                __builder2.AddAttribute(153, "max", 
#line 102 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                        factura.totalComprobante - factura.totalCancelado

#line default
#line hidden
                );
                __builder2.AddAttribute(154, "class", "form-control");
                __builder2.AddAttribute(155, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 102 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                                                                        ordenPago.Imputaciones.Single(x => x.FacturaComprasId == factura.Id).totalImputado

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(156, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => ordenPago.Imputaciones.Single(x => x.FacturaComprasId == factura.Id).totalImputado = __value, ordenPago.Imputaciones.Single(x => x.FacturaComprasId == factura.Id).totalImputado, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(157, "\r\n");
#line 103 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                            }

#line default
#line hidden
                __builder2.AddContent(158, "                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(159, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(160, "\r\n");
#line 106 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                }

#line default
#line hidden
                __builder2.AddContent(161, "                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(162, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(163, "\r\n\r\n\r\n\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(164, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(165, "\r\n                ");
                __builder2.OpenElement(166, "div");
                __builder2.AddAttribute(167, "class", "tab-pane fade");
                __builder2.AddAttribute(168, "id", "pills-tesoreria");
                __builder2.AddAttribute(169, "role", "tabpanel");
                __builder2.AddAttribute(170, "aria-labelledby", "pills-tesoreria-tab");
                __builder2.AddMarkupContent(171, "\r\n\r\n                    ");
                __builder2.OpenElement(172, "div");
                __builder2.AddAttribute(173, "class", "p-4");
                __builder2.AddAttribute(174, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(175, "\r\n                        ");
                __builder2.OpenElement(176, "div");
                __builder2.AddAttribute(177, "class", "d-flex justify-content-end");
                __builder2.OpenElement(178, "div");
                __builder2.AddAttribute(179, "class", "btn btn-info");
                __builder2.AddAttribute(180, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 117 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                      () => ordenPago.movimientosCaja.Add(new MovimientoCaja {  entra = true, })

#line default
#line hidden
                ));
                __builder2.AddContent(181, "Agregar");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(182, "\r\n                        ");
                __builder2.OpenElement(183, "table");
                __builder2.AddAttribute(184, "class", "table table-sm");
                __builder2.AddMarkupContent(185, "\r\n                            ");
                __builder2.AddMarkupContent(186, @"<thead>
                                <tr>
                                    <th>Caja</th>
                                    <th>Importe</th>
                                    <th></th>
                                </tr>
                            </thead>
");
#line 126 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                             foreach (MovimientoCaja movimientoCaja in ordenPago.movimientosCaja)
                            {

#line default
#line hidden
                __builder2.AddContent(187, "                                ");
                __builder2.OpenElement(188, "tr");
                __builder2.AddMarkupContent(189, "\r\n                                    ");
                __builder2.OpenElement(190, "td");
                __builder2.AddMarkupContent(191, "\r\n                                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.OrdenesDePago.OrdenPagoForm.TypeInference.CreateSelectGenerico_1(__builder2, 192, 193, 
#line 130 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                               cajas

#line default
#line hidden
                , 194, 
#line 130 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                  movimientoCaja.Caja

#line default
#line hidden
                , 195, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, 
#line 131 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                      (Caja caja) => { movimientoCaja.Caja = caja; movimientoCaja.CajaId = caja.Id; }

#line default
#line hidden
                ), 196, (caja) => (__builder3) => {
                    __builder3.AddContent(197, 
#line 133 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                        caja.nombre

#line default
#line hidden
                    );
                }
                );
                __builder2.AddMarkupContent(198, "\r\n                                        ");
                __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.OrdenesDePago.OrdenPagoForm.TypeInference.CreateValidationMessage_2(__builder2, 199, 200, 
#line 135 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                  () => ordenPago.Imputaciones

#line default
#line hidden
                );
                __builder2.AddMarkupContent(201, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(202, "\r\n                                    ");
                __builder2.OpenElement(203, "td");
                __builder2.AddMarkupContent(204, "\r\n                                        ");
                __builder2.OpenElement(205, "input");
                __builder2.AddAttribute(206, "type", "number");
                __builder2.AddAttribute(207, "max", "");
                __builder2.AddAttribute(208, "step", "0.01");
                __builder2.AddAttribute(209, "class", "form-control");
                __builder2.AddAttribute(210, "value", 
#line 138 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                             movimientoCaja.totalMovimiento

#line default
#line hidden
                );
                __builder2.AddAttribute(211, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 138 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                                                        (ChangeEventArgs e)=> { movimientoCaja.totalMovimiento = Convert.ToDecimal(e.Value); ordenPago.totalComprobante = ordenPago.movimientosCaja.Sum(x => x.totalMovimiento); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(212, "\r\n\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(213, "\r\n\r\n                                    ");
                __builder2.OpenElement(214, "td");
                __builder2.OpenElement(215, "i");
                __builder2.AddAttribute(216, "class", "far fa-trash-alt text-danger");
                __builder2.AddAttribute(217, "style", "cursor:pointer");
                __builder2.AddAttribute(218, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 142 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                   () => { ordenPago.movimientosCaja.Remove(movimientoCaja); }

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(219, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(220, "\r\n");
#line 145 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                            }

#line default
#line hidden
                __builder2.AddContent(221, "                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(222, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(223, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(224, "\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(225, "\r\n\r\n\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(226, "\r\n\r\n        ");
                __builder2.OpenElement(227, "div");
                __builder2.AddAttribute(228, "class", "p-4");
                __builder2.AddAttribute(229, "style", "box-shadow:1px 1px 3px #323232");
                __builder2.AddMarkupContent(230, "\r\n");
#line 155 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
             if (true)
            {
                decimal diferencia = ordenPago.movimientosCaja.Sum(x => x.totalMovimiento) - ordenPago.Imputaciones.Sum(x => x.totalImputado);

#line default
#line hidden
                __builder2.AddContent(231, "                ");
                __builder2.OpenElement(232, "div");
                __builder2.AddAttribute(233, "class", "col-md-12");
                __builder2.AddMarkupContent(234, "<strong>Total imputado:</strong>$ ");
                __builder2.AddContent(235, 
#line 158 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                          ordenPago.Imputaciones.Sum(x => x.totalImputado)

#line default
#line hidden
                );
                __builder2.AddContent(236, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(237, "\r\n                ");
                __builder2.OpenElement(238, "div");
                __builder2.AddAttribute(239, "class", "col-md-12");
                __builder2.AddMarkupContent(240, "<strong>Total pagado:</strong>$ ");
                __builder2.AddContent(241, 
#line 159 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                        ordenPago.movimientosCaja.Sum(x => x.totalMovimiento)

#line default
#line hidden
                );
                __builder2.AddContent(242, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(243, "\r\n                ");
                __builder2.OpenElement(244, "div");
                __builder2.AddAttribute(245, "class", "col-md-12" + " " + (
#line 160 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                        diferencia > 0 ? "text-success" : ""

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(246, "<strong>A cuenta: </strong>$  ");
                __builder2.AddContent(247, 
#line 160 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                               diferencia > 0 ? diferencia : 0.00M

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(248, "\r\n                ");
                __builder2.OpenElement(249, "div");
                __builder2.AddAttribute(250, "class", "col-md-12" + " " + (
#line 161 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                        diferencia < 0 ? "text-danger" : ""

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(251, "<strong>Diferencia: </strong>$  ");
                __builder2.AddContent(252, 
#line 161 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
                                                                                                                diferencia < 0 ? diferencia : 0.00M

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(253, "\r\n");
#line 162 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
            }

#line default
#line hidden
                __builder2.AddContent(254, "        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(255, "\r\n        ");
                __builder2.AddMarkupContent(256, "<button type=\"submit\" class=\"btn btn-block btn-info my-3\">Crear</button>\r\n    ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(257, "\r\n");
#line 166 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
}

#line default
#line hidden
        }
        #pragma warning restore 1998
#line 169 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Tesoreria\OrdenesDePago\OrdenPagoForm.razor"
       
    public OrdenPago ordenPago { get; set; }
    public List<FacturaCompras> facturasPendientes { get; set; } = new List<FacturaCompras>();
    public System.Security.Claims.ClaimsPrincipal User { get; set; }
    public string userName { get; set; }
    public List<Caja> cajas { get; set; }
    public bool cargando { get; set; }
    protected override async Task OnInitializedAsync()
    {

        ordenPago = new OrdenPago { movimientosCaja = new List<MovimientoCaja>(), Imputaciones = new List<ImputacionComprobantesCompra>() };

        var authState = await authStateProvider.GetAuthenticationStateAsync();
        User = authState.User;
        userName = User.Identity.Name;
        await ListarCajas();
    }


    public async Task ListarCajas()
    {
        cajas = await http.GetJsonAsync<List<Caja>>($"api/caja/cajasHabilitadas?userName={userName}");

    }

    public async Task<List<Proveedor>> buscarProveedores(string name)
    {
        return await http.GetJsonAsync<List<Proveedor>>($"api/proveedor?cantidadDeRegistros=25&filtro={name}");
    }

    public async Task proveedorSeleccionado(Proveedor proveedor)
    {
        ordenPago.Proveedor = proveedor;
        ordenPago.ProveedorId = proveedor.Id;
        await BuscarComprobantesPendientes();
        this.StateHasChanged();
    }
    public async Task BuscarComprobantesPendientes()
    {

        facturasPendientes = await http.GetJsonAsync<List<FacturaCompras>>($"api/facturaCompra/facturasPorProveedorParaRecibo?proveedorId={ordenPago.ProveedorId}");
    }


    public async Task CrearOrdenPago()
    {
        ordenPago.Proveedor.Domicilio = null;
        if (ordenPago.Imputaciones.Count > 0)
        {
            ordenPago.EstadoReciboId = 1;
        }
        else
        {
            ordenPago.EstadoReciboId = 2;

        }
        ordenPago.totalImputado = ordenPago.Imputaciones.Sum(x => x.totalImputado);
        var respuesta = await repositorio.Post("api/OrdenPago", ordenPago);
        cargando = false;

        if (!respuesta.Error)
        {
            uri.NavigateTo($"/BackOffice/Tesoreria/ListadoOrdenesPago");
            toastService.ShowSuccess("Se creó correctamente el ordenPago");
        }
        else
        {
            toastService.ShowError(respuesta.HttpResponseMessage.Content.ReadAsStringAsync().Result);
        }
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager uri { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IToastService toastService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IRepositorio repositorio { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider authStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
namespace __Blazor.SurcosBlazor.Client.Pages.BackOffice.Tesoreria.OrdenesDePago.OrdenPagoForm
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateInputBuscaTypeahead_0<T>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Func<T, T> __arg0, int __seq1, global::System.Func<global::System.String, global::System.Threading.Tasks.Task<global::System.Collections.Generic.IEnumerable<T>>> __arg1, int __seq2, global::Microsoft.AspNetCore.Components.RenderFragment<T> __arg2)
        {
        __builder.OpenComponent<global::SurcosBlazor.Client.Shared.InputBuscaTypeahead<T>>(seq);
        __builder.AddAttribute(__seq0, "ElementoSeleccionado", __arg0);
        __builder.AddAttribute(__seq1, "SearchMethod", __arg1);
        __builder.AddAttribute(__seq2, "MyResultTemplate", __arg2);
        __builder.CloseComponent();
        }
        public static void CreateSelectGenerico_1<T>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Collections.Generic.List<T> __arg0, int __seq1, T __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<T> __arg2, int __seq3, global::Microsoft.AspNetCore.Components.RenderFragment<T> __arg3)
        {
        __builder.OpenComponent<global::SurcosBlazor.Client.Shared.SelectGenerico<T>>(seq);
        __builder.AddAttribute(__seq0, "TList", __arg0);
        __builder.AddAttribute(__seq1, "TItemActual", __arg1);
        __builder.AddAttribute(__seq2, "SelectItem", __arg2);
        __builder.AddAttribute(__seq3, "TTemplate", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_2<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
