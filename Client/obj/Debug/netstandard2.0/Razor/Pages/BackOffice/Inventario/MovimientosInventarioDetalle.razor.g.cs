#pragma checksum "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "70784a7999acc15123a5851fc55a79fa20bc91bf"
// <auto-generated/>
#pragma warning disable 1591
namespace SurcosBlazor.Client.Pages.BackOffice.Inventario
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client;

#line default
#line hidden
#line 7 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Shared;

#line default
#line hidden
#line 9 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Helpers;

#line default
#line hidden
#line 11 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared.Entidades;

#line default
#line hidden
#line 12 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared;

#line default
#line hidden
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Repositorio;

#line default
#line hidden
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#line 8 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
using Markdig;

#line default
#line hidden
#line 6 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
           [Authorize(Roles = "Admin, Inventario")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(BackOfficeLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/BackOffice/Inventario/MovimientoInventario/{inventarioId:int}")]
    public partial class MovimientosInventarioDetalle : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "nav");
            __builder.AddAttribute(1, "aria-label", "breadcrumb");
            __builder.AddMarkupContent(2, "\r\n    ");
            __builder.OpenElement(3, "ol");
            __builder.AddAttribute(4, "class", "breadcrumb");
            __builder.AddMarkupContent(5, "\r\n        ");
            __builder.OpenElement(6, "li");
            __builder.AddAttribute(7, "class", "breadcrumb-item");
            __builder.AddAttribute(8, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                ()=>uri.NavigateTo("/BackOffice/Inventario")

#line default
#line hidden
            ));
            __builder.AddContent(9, "Invetario");
            __builder.CloseElement();
            __builder.AddMarkupContent(10, "\r\n        ");
            __builder.OpenElement(11, "li");
            __builder.AddAttribute(12, "class", "breadcrumb-item");
            __builder.AddAttribute(13, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                ()=>uri.NavigateTo("/BackOffice/Inventario/Listado")

#line default
#line hidden
            ));
            __builder.AddContent(14, "Inventarios");
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n\r\n        ");
            __builder.OpenElement(16, "li");
            __builder.AddAttribute(17, "class", "breadcrumb-item active");
            __builder.AddAttribute(18, "aria-current", "page");
            __builder.AddAttribute(19, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                           ()=>uri.NavigateTo($"/BackOffice/Inventario/MovimientoInventario/{inventarioId}")

#line default
#line hidden
            ));
            __builder.AddContent(20, "Movimientos Inventario");
            __builder.CloseElement();
            __builder.AddMarkupContent(21, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(23, "\r\n");
            __builder.AddMarkupContent(24, "<h3>Movimientos Inventario</h3>\r\n");
            __builder.OpenElement(25, "div");
            __builder.AddAttribute(26, "class", "col-md-12 row mx-0  p-4 rounded-1");
            __builder.AddAttribute(27, "style", "box-shadow:2px 2px 4px #262626");
            __builder.AddMarkupContent(28, "\r\n    ");
            __builder.OpenElement(29, "div");
            __builder.AddAttribute(30, "class", "col-md-4");
            __builder.AddMarkupContent(31, "\r\n        ");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.SelectGenerico<Deposito>>(32);
            __builder.AddAttribute(33, "TList", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<Deposito>>(
#line 22 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                               depositos

#line default
#line hidden
            ));
            __builder.AddAttribute(34, "Label", "Deposito");
            __builder.AddAttribute(35, "TItemActual", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Deposito>(
#line 22 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                        deposito

#line default
#line hidden
            ));
            __builder.AddAttribute(36, "SelectItem", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Deposito>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Deposito>(this, 
#line 23 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                      (Deposito deposito)=> { this.deposito = deposito; }

#line default
#line hidden
            )));
            __builder.AddAttribute(37, "TTemplate", (Microsoft.AspNetCore.Components.RenderFragment<Deposito>)((Deposito) => (__builder2) => {
                __builder2.AddContent(38, 
#line 24 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                        Deposito.nombre

#line default
#line hidden
                );
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(39, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(40, "\r\n    ");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "col-md-4");
            __builder.AddMarkupContent(43, "\r\n\r\n        ");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.SelectGenerico<ProductoPresentacion>>(44);
            __builder.AddAttribute(45, "TList", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<ProductoPresentacion>>(
#line 29 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                               productosPresentacion

#line default
#line hidden
            ));
            __builder.AddAttribute(46, "Label", "Producto");
            __builder.AddAttribute(47, "TItemActual", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<ProductoPresentacion>(
#line 29 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                                                productoPresentacion

#line default
#line hidden
            ));
            __builder.AddAttribute(48, "SelectItem", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<ProductoPresentacion>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<ProductoPresentacion>(this, 
#line 30 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                      (ProductoPresentacion producto)=> { this.productoPresentacion = producto; }

#line default
#line hidden
            )));
            __builder.AddAttribute(49, "TTemplate", (Microsoft.AspNetCore.Components.RenderFragment<ProductoPresentacion>)((Producto) => (__builder2) => {
                __builder2.AddContent(50, 
#line 31 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                        Producto.Producto.nombre

#line default
#line hidden
                );
                __builder2.AddContent(51, ", ");
                __builder2.AddContent(52, 
#line 31 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                   Producto.PresentacionProducto.nombre

#line default
#line hidden
                );
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(53, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n");
#line 34 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
     if (deposito != null && productoPresentacion != null)
    {

#line default
#line hidden
            __builder.AddContent(55, "        ");
            __builder.OpenElement(56, "div");
            __builder.AddAttribute(57, "class", "col-md-2 btn btn-sm btn-info text-center align-items-center");
            __builder.AddAttribute(58, "style", "width:10%");
            __builder.AddAttribute(59, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 36 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                               async()=>await BuscarInventario(productoPresentacion.Id, deposito.Id)

#line default
#line hidden
            ));
            __builder.AddMarkupContent(60, "\r\n            ");
            __builder.AddMarkupContent(61, "<span><i class=\"fas fa-search mr-1\"></i>Buscar</span>\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(62, "\r\n");
#line 39 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
    }

#line default
#line hidden
            __builder.CloseElement();
            __builder.AddMarkupContent(63, "\r\n");
#line 41 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
 if (inventario != null)
{
    

#line default
#line hidden
#line 43 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
     if (inventario.Id != 0)
    {

#line default
#line hidden
            __builder.AddContent(64, "        ");
            __builder.OpenElement(65, "div");
            __builder.AddAttribute(66, "class", "d-flex justify-content-between align-items-center my-3 col-md-12 mx-0 px-0");
            __builder.AddMarkupContent(67, "\r\n\r\n            ");
            __builder.OpenElement(68, "h3");
            __builder.AddAttribute(69, "class", "my-4");
            __builder.AddContent(70, 
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                              inventario.ProductoPresentacion.Producto.nombre

#line default
#line hidden
            );
            __builder.AddContent(71, ", ");
            __builder.AddContent(72, 
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                inventario.ProductoPresentacion.PresentacionProducto.nombre

#line default
#line hidden
            );
            __builder.AddContent(73, " - ");
            __builder.AddContent(74, 
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                                                               inventario.Deposito.nombre

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(75, "\r\n            ");
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "btn btn-sm btn-info");
            __builder.AddAttribute(78, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 48 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                         async ()=> await ToggleModal("NuevoMovimiento")

#line default
#line hidden
            ));
            __builder.AddContent(79, "Nuevo Movimiento");
            __builder.CloseElement();
            __builder.AddMarkupContent(80, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\r\n        ");
            __builder.OpenElement(82, "div");
            __builder.AddAttribute(83, "class", "d-flex justify-content-between");
            __builder.AddMarkupContent(84, "\r\n            ");
            __builder.OpenElement(85, "div");
            __builder.AddAttribute(86, "class", "row mx-0 px-0");
            __builder.OpenElement(87, "strong");
            __builder.AddContent(88, "Total en existencia: ");
            __builder.AddContent(89, 
#line 51 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                     inventario.cantidadUnidadesEnExistencia

#line default
#line hidden
            );
            __builder.AddContent(90, " Unidades");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(91, "\r\n            ");
            __builder.OpenElement(92, "div");
            __builder.AddMarkupContent(93, "\r\n                ");
            __builder.OpenElement(94, "input");
            __builder.AddAttribute(95, "type", "checkbox");
            __builder.AddAttribute(96, "checked", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 53 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                              mostrarColores

#line default
#line hidden
            ));
            __builder.AddAttribute(97, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => mostrarColores = __value, mostrarColores));
            __builder.SetUpdatesAttributeName("checked");
            __builder.CloseElement();
            __builder.AddMarkupContent(98, " Mostrar Colores\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(99, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(100, "\r\n");
            __builder.AddContent(101, "        ");
            __builder.OpenElement(102, "table");
            __builder.AddAttribute(103, "class", "table table-sm table-striped");
            __builder.AddMarkupContent(104, "\r\n            ");
            __builder.AddMarkupContent(105, @"<thead>
                <tr class=""bg-dark text-white"">
                    <th>Fecha</th>
                    <th>Orden Producción</th>

                    <th>Descripción</th>
                    <th>Entra</th>
                    <th>Sale</th>
                    <th>Cantidad Movida</th>
                    <th>En Stock</th>
                </tr>
            </thead>
            ");
            __builder.OpenElement(106, "tbody");
            __builder.AddMarkupContent(107, "\r\n");
#line 71 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                 if (inventario.MovimientosInventario != null)
                {
                    decimal cantidad = inventario.cantidadUnidadesEnExistencia;
                    int anterior = 0;
                    int aux = 0;
                    

#line default
#line hidden
#line 76 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                     foreach (MovimientoInventario movimiento in inventario.MovimientosInventario)
                    {

                        if (aux != 0)
                        {
                            cantidad += anterior;
                        }
                        aux++;
                        anterior = movimiento.entra ? -1 * movimiento.cantidadUnidadesMovida : movimiento.cantidadUnidadesMovida;

#line default
#line hidden
            __builder.AddContent(108, "                        ");
            __builder.OpenElement(109, "tr");
            __builder.AddAttribute(110, "style", "background:" + " " + (
#line 85 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                 mostrarColores ? movimiento.entra ? "#9CE36D" : "#E36E54" : ""

#line default
#line hidden
            ));
            __builder.AddMarkupContent(111, "\r\n                            ");
            __builder.OpenElement(112, "td");
            __builder.AddContent(113, 
#line 86 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                 movimiento.fecha

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(114, "\r\n                            ");
            __builder.OpenElement(115, "td");
            __builder.AddMarkupContent(116, "\r\n");
#line 88 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                 if (movimiento.OrdenProduccion != null)
                                {

#line default
#line hidden
            __builder.OpenElement(117, "a");
            __builder.AddAttribute(118, "href", 
#line 89 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                            $"/BackOffice/Produccion/DetalleOrdenProduccion/{movimiento.OrdenProduccionId}"

#line default
#line hidden
            );
            __builder.AddContent(119, 
#line 89 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                                                $"Ord.Producción #{movimiento.OrdenProduccionId}"

#line default
#line hidden
            );
            __builder.CloseElement();
#line 89 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                                                                                                      }

#line default
#line hidden
            __builder.AddContent(120, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(121, "\r\n                        ");
            __builder.OpenElement(122, "td");
            __builder.AddMarkupContent(123, "\r\n                            ");
            __builder.AddContent(124, 
#line 92 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                              (MarkupString)movimiento.descripcion

#line default
#line hidden
            );
            __builder.AddMarkupContent(125, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(126, "\r\n                        ");
            __builder.OpenElement(127, "td");
            __builder.OpenElement(128, "i");
            __builder.AddAttribute(129, "class", 
#line 94 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                        movimiento.entra  ? " fas fa-check text-success" : "fas fa-times text-danger" 

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(130, "\r\n                        ");
            __builder.OpenElement(131, "td");
            __builder.OpenElement(132, "i");
            __builder.AddAttribute(133, "class", 
#line 95 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                        movimiento.sale ? " fas fa-check text-success" : "fas fa-times text-danger" 

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(134, "\r\n                        ");
            __builder.OpenElement(135, "td");
            __builder.AddAttribute(136, "class", "text-dark");
            __builder.AddContent(137, 
#line 96 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                               movimiento.cantidadUnidadesMovida

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(138, "\r\n                        ");
            __builder.OpenElement(139, "td");
            __builder.AddAttribute(140, "class", "text-dark");
            __builder.AddContent(141, 
#line 97 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                               cantidad

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(142, "\r\n\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(143, "\r\n");
#line 100 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                }

#line default
#line hidden
#line 100 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                 
                }

#line default
#line hidden
            __builder.AddContent(144, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(145, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(146, "\r\n        ");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.PaginacionComp>(147);
            __builder.AddAttribute(148, "PaginaActual", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#line 104 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                      paginaActual

#line default
#line hidden
            ));
            __builder.AddAttribute(149, "PaginaSeleccionada", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Int32>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Int32>(this, 
#line 104 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                        paginaSeleccionada

#line default
#line hidden
            )));
            __builder.AddAttribute(150, "PaginasTotales", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#line 104 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                                                            paginasTotales

#line default
#line hidden
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(151, "\r\n");
#line 105 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"

    }
    else
    {

#line default
#line hidden
            __builder.AddContent(152, "        ");
            __builder.OpenElement(153, "div");
            __builder.AddAttribute(154, "class", "d-flex justify-content-between align-items-center my-3 col-md-12 mx-0 px-0");
            __builder.AddMarkupContent(155, "\r\n            ");
            __builder.AddMarkupContent(156, "<h4>Este inventario no registra movimientos </h4>\r\n            ");
            __builder.OpenElement(157, "div");
            __builder.AddAttribute(158, "class", "btn btn-sm btn-info");
            __builder.AddAttribute(159, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 111 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                         async ()=> await ToggleModal("NuevoMovimiento")

#line default
#line hidden
            ));
            __builder.AddContent(160, "Nuevo Movimiento");
            __builder.CloseElement();
            __builder.AddMarkupContent(161, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(162, "\r\n");
#line 113 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
    }

#line default
#line hidden
#line 113 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
     
}

#line default
#line hidden
            __builder.AddMarkupContent(163, "\r\n");
            __builder.OpenComponent<SurcosBlazor.Client.Shared.Modal>(164);
            __builder.AddAttribute(165, "modalId", "NuevoMovimiento");
            __builder.AddAttribute(166, "modalTamaño", "modal-md");
            __builder.AddAttribute(167, "modalTitulo", "Nuevo Movimiento de Inventario");
            __builder.AddAttribute(168, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(169, "\r\n    ");
                __builder2.OpenComponent<SurcosBlazor.Client.Pages.BackOffice.Inventario.MovimientoInventarioForm>(170);
                __builder2.AddAttribute(171, "movimiento", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<SurcosBlazor.Shared.Entidades.MovimientoInventario>(
#line 117 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                          movimientoInventario

#line default
#line hidden
                ));
                __builder2.AddAttribute(172, "callback", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<SurcosBlazor.Shared.Entidades.Inventario>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<SurcosBlazor.Shared.Entidades.Inventario>(this, 
#line 117 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
                                                                            async(Inventario inventario)=> { await BuscarInventario( inventario.ProductoPresentacionId,inventario.DepositoId); this.StateHasChanged(); }

#line default
#line hidden
                )));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(173, "\r\n");
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#line 120 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\BackOffice\Inventario\MovimientosInventarioDetalle.razor"
       
    [Parameter] public int? inventarioId { get; set; }

    public List<Deposito> depositos { get; set; }
    public List<ProductoPresentacion> productosPresentacion { get; set; }
    public Deposito deposito { get; set; }
    public ProductoPresentacion productoPresentacion { get; set; }
    public Inventario inventario { get; set; }
    public MovimientoInventario movimientoInventario { get; set; }
    private int paginaActual = 1;
    private int paginasTotales;
    private HttpResponseWrapper<List<MovimientoInventario>> responseHttp;
    public System.Security.Claims.ClaimsPrincipal User { get; set; }
    public string userName { get; set; }
    public bool mostrarColores { get; set; }

    private async Task paginaSeleccionada(int pagina)
    {
        paginaActual = pagina;
        await ListarMovimientosInventario(pagina);
    }
    public async Task ListarMovimientosInventario(int pagina = 1)
    {
        responseHttp = await repositorio.Get<List<MovimientoInventario>>($"api/movimientoInventario?inventarioId={inventario.Id}&pagina={pagina}&cantidadDeRegistros=20");
        if (!responseHttp.Error)
        {
            inventario.MovimientosInventario = responseHttp.Response;

            var conteo = responseHttp.HttpResponseMessage.Headers.GetValues("conteo").FirstOrDefault();

            paginasTotales = int.Parse(responseHttp.HttpResponseMessage.Headers.GetValues("totalPaginas").FirstOrDefault());

        }



    }
    protected override async Task OnParametersSetAsync()
    {
        var authState = await authStateProvider.GetAuthenticationStateAsync();
        User = authState.User;
        userName = User.Identity.Name;

        await BuscarInventario();
        await ListarDepositos();
        await ListarProductosPresentacion();
    }
    public async Task ListarDepositos()
    {
        depositos = await http.GetJsonAsync<List<Deposito>>($"api/deposito/depositosHabilitados?userName={userName}");
    }
    public async Task ListarProductosPresentacion()
    {
        productosPresentacion = await http.GetJsonAsync<List<ProductoPresentacion>>("api/productopresentacion/productoParaInventario");
    }

    public async Task BuscarInventario()
    {
        if (inventarioId != 0 && inventarioId != null)
        {

            inventario = await http.GetJsonAsync<Inventario>($"api/inventario/{inventarioId}");
            paginaActual = 1;
            await ListarMovimientosInventario(paginaActual);
            deposito = inventario.Deposito;
            productoPresentacion = inventario.ProductoPresentacion;
            movimientoInventario = new MovimientoInventario { Inventario = inventario, InventarioId = inventario.Id };
        }
    }
    public async Task BuscarInventario(int productoId, int depositoId)
    {
        if (productoId != 0 && depositoId != 0)
        {

            inventario = await http.GetJsonAsync<Inventario>($"api/inventario/DetalleInventario?productoId={productoId}&depositoId={depositoId}");
            paginaActual = 1;
            if (inventario.Id != 0)
            {
                await ListarMovimientosInventario(paginaActual);
            }
            movimientoInventario = new MovimientoInventario
            {
                Inventario = new Inventario
                {
                    ProductoPresentacion = productoPresentacion,
                    Deposito = deposito,
                    ProductoPresentacionId = productoPresentacion.Id,
                    DepositoId = deposito.Id,
                    Id = inventario.Id
                }
                                                                                        ,
                InventarioId = inventario.Id
            };
        }
    }

    public async Task ToggleModal(string id)
    {

        await js.InvokeAsync<object>("ModalToggle", id);
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager uri { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider authStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IRepositorio repositorio { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime js { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
#pragma warning restore 1591
