#pragma checksum "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f6efe7cbf508431062ae268498eea4c444f381d6"
// <auto-generated/>
#pragma warning disable 1591
namespace SurcosBlazor.Client.Pages.ECommerce
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client;

#line default
#line hidden
#line 7 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Shared;

#line default
#line hidden
#line 9 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Helpers;

#line default
#line hidden
#line 11 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared.Entidades;

#line default
#line hidden
#line 12 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Shared;

#line default
#line hidden
#line 13 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using SurcosBlazor.Client.Repositorio;

#line default
#line hidden
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#line 16 "C:\Users\agust\source\repos\SurcosBlazor\Client\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#line 3 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
using SurcosBlazor.Client.Pages.ECommerce;

#line default
#line hidden
    public partial class Productos : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "id", "tienda");
            __builder.AddAttribute(2, "class", "mb-4 tienda");
            __builder.AddMarkupContent(3, "\r\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "navBar");
            __builder.AddMarkupContent(6, "\r\n\r\n        ");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "listasPrecios");
            __builder.AddMarkupContent(9, "\r\n            ");
            __builder.OpenElement(10, "div");
            __builder.AddMarkupContent(11, "\r\n                ");
            __builder.AddMarkupContent(12, "<span class=\"d-none d-md-inline\">LISTA: </span>\r\n");
#line 10 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                 if (listas != null)
                {
                    

#line default
#line hidden
#line 12 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                     if (listas.Count() > 0)
                    {
                        

#line default
#line hidden
#line 14 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                         if (cantidad > 0)
                        {

#line default
#line hidden
            __builder.OpenElement(13, "span");
            __builder.AddContent(14, 
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                lista?.TipoListaPrecio?.nombre.ToUpper()

#line default
#line hidden
            );
            __builder.CloseElement();
#line 15 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                                               }
                    else
                    {

#line default
#line hidden
            __builder.AddContent(15, "            ");
            __builder.OpenElement(16, "select");
            __builder.AddAttribute(17, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 18 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                 async (ChangeEventArgs e)=> { await seleccionarLista(Convert.ToInt32(e.Value.ToString())); }

#line default
#line hidden
            ));
            __builder.AddMarkupContent(18, "\r\n");
#line 19 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                 foreach (ListaPrecios lista in listas)
                {
                    if (this.lista?.Id == lista.Id)
                    {

#line default
#line hidden
            __builder.AddContent(19, "                        ");
            __builder.OpenElement(20, "option");
            __builder.AddAttribute(21, "selected", true);
            __builder.AddAttribute(22, "value", 
#line 23 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                 lista.Id

#line default
#line hidden
            );
            __builder.AddContent(23, 
#line 23 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                            lista.TipoListaPrecio.nombre.ToUpper()

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n");
#line 24 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"

                    }
                    else
                    {

#line default
#line hidden
            __builder.AddContent(25, "                        ");
            __builder.OpenElement(26, "option");
            __builder.AddAttribute(27, "value", 
#line 28 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                        lista.Id

#line default
#line hidden
            );
            __builder.AddContent(28, 
#line 28 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                   lista.TipoListaPrecio.nombre.ToUpper()

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\r\n");
#line 29 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                    }
                }

#line default
#line hidden
            __builder.AddContent(30, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\r\n");
#line 32 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                    }

#line default
#line hidden
#line 32 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                     
                    }
                    else
                    {

#line default
#line hidden
            __builder.AddContent(32, " ");
            __builder.AddMarkupContent(33, "<h4>No hay listas disponibles</h4>");
#line 35 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                        }

#line default
#line hidden
#line 35 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                         

                }

#line default
#line hidden
            __builder.AddContent(34, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(35, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(36, "\r\n        ");
            __builder.OpenElement(37, "div");
            __builder.AddAttribute(38, "class", "logoTienda");
            __builder.AddAttribute(39, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 40 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                          goToLandingPage

#line default
#line hidden
            ));
            __builder.AddMarkupContent(40, "\r\n            <img src=\"/img/surcosLogoNuevo.jpg\" style=\"cursor:pointer\">\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(41, "\r\n        ");
            __builder.OpenElement(42, "div");
            __builder.AddAttribute(43, "class", "carrito");
            __builder.AddAttribute(44, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 43 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                       toggleCarrito

#line default
#line hidden
            ));
            __builder.AddMarkupContent(45, "\r\n            ");
            __builder.OpenElement(46, "span");
            __builder.AddContent(47, "$");
            __builder.AddContent(48, 
#line 44 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                    total

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n\r\n            <i class=\"fas fa-shopping-cart\"></i>\r\n            ");
            __builder.OpenElement(50, "label");
            __builder.AddAttribute(51, "class", "cantidad");
            __builder.AddContent(52, 
#line 47 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                     cantidad

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(53, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(55, "\r\n\r\n\r\n    ");
            __builder.OpenElement(56, "div");
            __builder.AddAttribute(57, "class", "categorias");
            __builder.AddMarkupContent(58, "\r\n");
#line 53 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
         foreach (CategoriaProducto categoria in categorias)
        {

#line default
#line hidden
            __builder.AddContent(59, "            ");
            __builder.OpenElement(60, "div");
            __builder.AddAttribute(61, "class", "categoria" + "  " + (
#line 55 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                     this.categoria.Id == categoria.Id ? "seleccionada" : ""

#line default
#line hidden
            ));
            __builder.AddAttribute(62, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 55 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                                                                           ()=> { this.categoria = categoria; aplicarFiltros(); this.StateHasChanged(); }

#line default
#line hidden
            ));
            __builder.AddMarkupContent(63, "\r\n                \r\n                    ");
            __builder.OpenElement(64, "span");
            __builder.AddAttribute(65, "class", "nombre col-md-12 row mx-2 px-0 d-flex align-items-center");
            __builder.AddMarkupContent(66, "\r\n                        ");
            __builder.OpenElement(67, "span");
            __builder.AddAttribute(68, "class", "col-md-10 mx-0 px-0");
            __builder.AddContent(69, 
#line 58 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                           categoria.nombre

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(70, "\r\n");
#line 59 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                         if (this.categoria.Id == categoria.Id)
                        {

#line default
#line hidden
            __builder.AddContent(71, "                            ");
            __builder.OpenElement(72, "span");
            __builder.AddAttribute(73, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 61 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                            (() => {this.categoria = new CategoriaProducto(); cargarProductos(); this.StateHasChanged(); })

#line default
#line hidden
            ));
            __builder.AddAttribute(74, "class", "text-success col-md-2 mx-0 px-0");
            __builder.AddMarkupContent(75, "<i class=\"far fa-check-circle\"></i>");
            __builder.CloseElement();
            __builder.AddMarkupContent(76, "\r\n");
#line 62 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                        }

#line default
#line hidden
            __builder.AddContent(77, "                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(78, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(79, "\r\n");
#line 65 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"

        }

#line default
#line hidden
            __builder.AddContent(80, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\r\n\r\n    ");
            __builder.OpenElement(82, "div");
            __builder.AddAttribute(83, "class", "principal");
            __builder.AddMarkupContent(84, "\r\n\r\n        ");
            __builder.OpenElement(85, "div");
            __builder.AddAttribute(86, "class", "productos col-md-12 row mx-0 px-0");
            __builder.AddMarkupContent(87, "\r\n");
#line 72 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
             if (lista != null)
            {

#line default
#line hidden
            __builder.AddContent(88, "                ");
            __Blazor.SurcosBlazor.Client.Pages.ECommerce.Productos.TypeInference.CreateListadoGenerico_0(__builder, 89, 90, 
#line 74 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                          productos

#line default
#line hidden
            , 91, (__builder2) => {
                __builder2.AddMarkupContent(92, "\r\n");
#line 76 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                         for (int i = 0; i < productos.Count; i++)
                        {

#line default
#line hidden
                __builder2.AddContent(93, "                            ");
                __builder2.OpenElement(94, "div");
                __builder2.AddAttribute(95, "class", "col-xl-3 col-lg-4 col-md-6 col-xs-6");
                __builder2.AddMarkupContent(96, "\r\n\r\n                                ");
                __builder2.OpenComponent<SurcosBlazor.Client.Pages.ECommerce.ProductoCard>(97);
                __builder2.AddAttribute(98, "productosEnCarrito", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<SurcosBlazor.Client.Helpers.ProductoEnCarritoModel>>(
#line 81 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                                    convertirEnProductoDeCarrito(DetallesPedidoActual.Where(x => x.ProductoPresentacion.ProductoId == productos[i].Id).ToList())

#line default
#line hidden
                ));
                __builder2.AddAttribute(99, "producto", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<SurcosBlazor.Shared.Entidades.Producto>(
#line 82 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                        productos[i]

#line default
#line hidden
                ));
                __builder2.AddAttribute(100, "addProducto", new System.Func<SurcosBlazor.Shared.Entidades.ProductoPresentacion, System.Int32, System.Int32, System.Threading.Tasks.Task>(
#line 83 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                           addProducto

#line default
#line hidden
                ));
                __builder2.AddAttribute(101, "listaId", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#line 84 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                       lista.Id

#line default
#line hidden
                ));
                __builder2.AddAttribute(102, "calcularPrecio", new System.Func<SurcosBlazor.Shared.Entidades.ProductoPresentacion, System.Decimal>(
#line 85 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                              calcularPrecio

#line default
#line hidden
                ));
                __builder2.AddAttribute(103, "productoPresentaciones", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<SurcosBlazor.Shared.Entidades.ProductoPresentacion>>(
#line 86 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                                      productoPresentaciones.Where(x => x.ProductoId == productos[i].Id).ToList()

#line default
#line hidden
                ));
                __builder2.AddAttribute(104, "descuento", new System.Func<SurcosBlazor.Shared.Entidades.ProductoPresentacion, System.Decimal>(
#line 87 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                         descuento

#line default
#line hidden
                ));
                __builder2.AddAttribute(105, "deleteProducto", new System.Func<SurcosBlazor.Shared.Entidades.ProductoPresentacion, System.Threading.Tasks.Task>(
#line 87 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                                                    deleteProducto

#line default
#line hidden
                ));
                __builder2.AddAttribute(106, "esElUltimo", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#line 88 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                          i == productos.Count -1 ? true :false

#line default
#line hidden
                ));
                __builder2.SetKey(
#line 80 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                                                    productos

#line default
#line hidden
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(107, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(108, "\r\n");
#line 91 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
                        }

#line default
#line hidden
                __builder2.AddContent(109, "                    ");
            }
            );
            __builder.AddMarkupContent(110, "\r\n");
#line 94 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
            }

#line default
#line hidden
            __builder.AddContent(111, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(112, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(113, "\r\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#line 100 "C:\Users\agust\source\repos\SurcosBlazor\Client\Pages\ECommerce\Productos.razor"
       
    [Parameter] public Provincia provincia { get; set; } = new Provincia();
    [Parameter] public Func<ProductoPresentacion, int, int, Task> addProducto { get; set; }
    [Parameter] public Func<ProductoPresentacion, Task> deleteProducto { get; set; }

    [Parameter] public EventCallback cargarCarritoLocalStorage { get; set; }
    [Parameter] public int cantidad { get; set; }
    [Parameter] public int clienteId { get; set; }
    [Parameter] public List<DetallePedido> DetallesPedidoActual { get; set; }
    [Parameter] public decimal total { get; set; } = 0.00M;
    public CategoriaProducto categoria { get; set; } = new CategoriaProducto();
    public PresentacionProducto presentacion { get; set; } = new PresentacionProducto();
    public List<ListaPrecios> listas { get; set; }
    public List<ProductoPresentacion> productoPresentaciones { get; set; }
    public List<Producto> productos { get; set; }
    public List<Producto> ProductosAMostrar { get; set; } = new List<Producto>();
    public List<CategoriaProducto> categorias { get; set; } = new List<CategoriaProducto>();
    public List<PresentacionProducto> presentaciones { get; set; } = new List<PresentacionProducto>();
    public ListaPrecios lista { get; set; }
    [Parameter] public EventCallback toggleCarrito { get; set; }
    public int productosMostrados { get; set; } = 8;

    public async Task BuscarListas(int provinciaId, int clienteId) {
        Console.WriteLine($"Provincia desde productos: {provinciaId}");
        if (provinciaId != 0)
        {

            listas = await http.GetJsonAsync<List<ListaPrecios>>($"api/ListaPrecios/ListaPrecioEcommerce?provinciaId={provinciaId}&clienteId={clienteId}");
            var ListaId = await js.GetFromLocalStorage("lista");

            if (listas.Count() > 0)
            {
                if (lista == null)
                {
                    if (!string.IsNullOrEmpty(ListaId) && listas.Select(x => x.Id).Contains(Convert.ToInt32(ListaId)))
                    {
                        await seleccionarLista(Convert.ToInt32(ListaId));

                    }
                    else
                    {
                        await seleccionarLista(listas[0].Id);

                    }
                }
            }
            else
            {
                lista = null;
            }
        }

    }

    public async Task seleccionarLista(int id)
    {
        lista = null;
        lista = await http.GetJsonAsync<ListaPrecios>($"api/ListaPrecios/{id}");
        categoria = new CategoriaProducto();
        cargarProductos();
        await cargarCarritoLocalStorage.InvokeAsync(new object());
        this.StateHasChanged();

    }
    public void cargarProductos()
    {
        productoPresentaciones = null;
        productos = null;
        productoPresentaciones = lista.DetalleListaPrecios.Select(x => x.ProductoPresentacion).OrderBy(x => x.PresentacionProducto.cantidad).Distinct().ToList();
        productos = productoPresentaciones.Select(x => x.Producto).Distinct().OrderByDescending(x => x.CategoriaProducto.clasificacion).ThenBy(x => x.nombre).ToList();
        //infiniteScroll();
        //js.InvokeVoidAsync("InfiniteScroll", DotNetObjectReference.Create(this));

        cargarCategorias();
        cargarPresentaciones();
        this.StateHasChanged();

    }

    public void cargarCategorias()
    {
        categorias = productos.Select(x => x.CategoriaProducto).Distinct().OrderByDescending(x => x.clasificacion).ThenBy(x => x.nombre).ToList();
    }
    public void cargarPresentaciones()
    {
        presentaciones = productoPresentaciones.Select(x => x.PresentacionProducto).Distinct().OrderBy(x => x.cantidad).ToList();

    }
    [JSInvokable]
    public  void infiniteScroll() {

        ProductosAMostrar.AddRange(productos.Skip(ProductosAMostrar.Count).Take(4).ToList());
    }


    public void aplicarFiltros()
    {
        if (categoria != null && categoria.Id != 0)
        {
            productos = productoPresentaciones.Select(x => x.Producto).Distinct().Where(x => x.CategoriaProductoId == categoria.Id).OrderBy(x => x.nombre).ToList();


        }
        if (presentacion != null && presentacion.Id != 0)
        {
            productos = productoPresentaciones.OrderBy(x => x.PresentacionProducto.cantidad).Where(x => x.PresentacionProductoId == presentacion.Id).Distinct().Select(x => x.Producto).ToList();

        }

    }
    public decimal calcularPrecio(ProductoPresentacion prod)
    {
        try
        {
            return lista.DetalleListaPrecios.FirstOrDefault(x => x.ProductoPresentacionId == prod.Id).precioUnitarioFinal;

        }
        catch (Exception)
        {

            return 0.00M;
        }
    }
    public decimal descuento(ProductoPresentacion prod)
    {
        try
        {
            return lista.DetalleListaPrecios.FirstOrDefault(x => x.ProductoPresentacionId == prod.Id).porcentajeDescuento;

        }
        catch (Exception)
        {

            return 0.00M;
        }



    }
    public async Task goToLandingPage()
    {
        await js.InvokeAsync<object>("goToLandingPage");
    }

    public List<ProductoEnCarritoModel> convertirEnProductoDeCarrito(List<DetallePedido> detalles)
    {
        List<ProductoEnCarritoModel> productoEnCarritoModels = new List<ProductoEnCarritoModel>();
        foreach (DetallePedido detalle in detalles)
        {
            productoEnCarritoModels.Add(new ProductoEnCarritoModel { producto = detalle.ProductoPresentacion, cantidad = detalle.cantidad });
        }
        return productoEnCarritoModels;
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime js { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
namespace __Blazor.SurcosBlazor.Client.Pages.ECommerce.Productos
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateListadoGenerico_0<T>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Collections.Generic.List<T> __arg0, int __seq1, global::Microsoft.AspNetCore.Components.RenderFragment __arg1)
        {
        __builder.OpenComponent<global::SurcosBlazor.Client.Shared.ListadoGenerico<T>>(seq);
        __builder.AddAttribute(__seq0, "listado", __arg0);
        __builder.AddAttribute(__seq1, "HayRegistros", __arg1);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
